(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6fdbd98c"],{"3dc6":function(e,t,a){"use strict";var n=a("c5a6"),r=a.n(n);r.a},b533:function(e,t,a){"use strict";a.r(t);var n,r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._l(e.navList,(function(e){return a("van-cell",{key:e.id,staticStyle:{"font-size":"24px"},attrs:{title:e.name}})})),e._v(" "),a("van-swipe",{staticStyle:{height:"200px"},attrs:{autoplay:3e3}},e._l(e.banners,(function(t,n){return a("van-swipe-item",{key:n,on:{click:e.clickSwipe}},[a("a",{attrs:{href:t.url}},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.path,expression:"image.path"}],staticStyle:{width:"100%"}})])])})),1),e._v(" "),e._l(e.goodsList,(function(t,n){return a("van-card",{key:n,attrs:{num:t.stock,price:e.formatPrice(t.price),desc:t.descript,title:t.name,thumb:t.img,"thumb-link":t.link},on:{click:function(a){return e.viewGoodsDetail(t.id)}}})})),e._v(" "),a("br"),e._v(" "),a("br"),e._v(" "),a("br"),e._v(" "),a("br"),e._v(" "),a("van-tabbar",{model:{value:e.activeFooter,callback:function(t){e.activeFooter=t},expression:"activeFooter"}},[a("van-tabbar-item",{attrs:{icon:"home-o",replace:"",to:"/index"}},[e._v("首页")]),e._v(" "),a("van-tabbar-item",{attrs:{icon:"cart-o",replace:"",to:"/cart"}},[e._v("购物车")]),e._v(" "),a("van-tabbar-item",{attrs:{icon:"user-o",replace:"",to:"/user"}},[e._v("我的")])],1)],2)},o=[],i=a("bd86"),s=(a("66cf"),a("343b")),c=(a("2994"),a("2bdd")),u=(a("2b28"),a("9ed2")),d=(a("e7e5"),a("d399")),l=(a("9cb7"),a("66fd")),p=(a("bda7"),a("5e46")),g=(a("da3c"),a("0b33")),m=(a("4b0a"),a("2bb1")),v=(a("7844"),a("5596")),b=(a("a52c"),a("2ed4")),h=(a("537a"),a("ac28")),f=(a("0653"),a("34e9")),j=(a("c194"),a("7744")),O=(a("c3a6"),a("ad06")),y=(a("81e6"),a("9ffb")),k=(a("4d48"),a("d1e1")),w=a("b775"),_={getAllCategories:function(){return Object(w["a"])({url:"/category/list",method:"get"})}},L=a("c40e"),x=a("4360"),F="/mobile",G={components:(n={},Object(i["a"])(n,k["a"].name,k["a"]),Object(i["a"])(n,y["a"].name,y["a"]),Object(i["a"])(n,O["a"].name,O["a"]),Object(i["a"])(n,j["a"].name,j["a"]),Object(i["a"])(n,f["a"].name,f["a"]),Object(i["a"])(n,h["a"].name,h["a"]),Object(i["a"])(n,b["a"].name,b["a"]),Object(i["a"])(n,v["a"].name,v["a"]),Object(i["a"])(n,m["a"].name,m["a"]),Object(i["a"])(n,g["a"].name,g["a"]),Object(i["a"])(n,p["a"].name,p["a"]),Object(i["a"])(n,l["a"].name,l["a"]),Object(i["a"])(n,d["a"].name,d["a"]),Object(i["a"])(n,u["a"].name,u["a"]),Object(i["a"])(n,c["a"].name,c["a"]),Object(i["a"])(n,"Lazyload",s["a"]),n),data:function(){return{navList:[],banners:[],goodsList:[],activeFooter:0,activeNav:1,total:0,listQuery:{page:1,limit:50,idCategory:void 0},count:0}},mounted:function(){this.init()},methods:{init:function(){var e=this,t=x["a"].state.app.category;if(t&&0!=t.length)this.navList=t,this.getBanners(this.activeNav);else{var a=navigator.platform;x["a"].dispatch("app/toggleDevice",a),_.getAllCategories().then((function(t){var a=t.data;e.navList=a,x["a"].dispatch("app/toggleCategory",a),e.getBanners(e.activeNav)})).catch((function(e){console.log("err",e),d["a"].fail(e)}))}this.getGoods(this.activeNav)},getBanners:function(e){var t=null;for(var a in this.navList)this.navList[a].id===e&&(t=this.navList[a].bannerList);for(var n=new Array,r=0;r<t.length;r++){var o="",i=t[r].page;if(""!=i&&(o=0===i.indexOf("http")?i:"#/"+t[r].page),""!=t[r].param){var s=JSON.parse(t[r].param);for(var c in s)o+="/"+s[c]}n.push({url:o,path:F+"/rest/file/getImgStream?idFile="+t[r].idFile})}this.banners=n},getGoods:function(e){var t=this;this.listQuery["idCategory"]=e,L["a"].queryGoods(this.listQuery).then((function(e){var a=e.data.list;for(var n in t.total=e.data.total,a){var r=a[n];r.img=F+"/rest/file/getImgStream?idFile="+r.pic}t.goodsList=a})).catch((function(e){Object(d["a"])(e)}))},clickSwipe:function(e,t){console.log(e),console.log(t)},viewGoodsDetail:function(e){this.$router.push({path:"/goods/"+e})},formatPrice:function(e){return(e/100).toFixed(2)}}},N=G,S=(a("3dc6"),a("2877")),P=Object(S["a"])(N,r,o,!1,null,null,null);t["default"]=P.exports},b775:function(e,t,a){"use strict";var n=a("bc3a"),r=a.n(n),o=(a("41cb"),a("4360")),i=a("5d2d"),s=r.a.create({baseURL:"/mobile",withCredentials:!0,timeout:15e3});s.interceptors.request.use((function(e){return i["a"].getToken()&&(e.headers["Authorization"]=i["a"].getToken()),i["a"].getOpenId()&&(e.headers["openId"]=i["a"].getOpenId()),e}),(function(e){return Promise.reject(e)})),s.interceptors.response.use((function(e){e.headers.token&&o["a"].dispatch("app/toggleToken",e.headers.token);var t=e.data;return t}),(function(e){if(e.response)switch(e.response.status){case 401:return o["a"].dispatch("app/toggleUser",{}),o["a"].dispatch("app/toggleToken",""),Promise.reject(e.response.data.message);case 500:return e.response.data.message&&e.response.data.message.indexOf("relogin")>-1?(console.log("need relogin"),o["a"].dispatch("app/toggleUser",{}),o["a"].dispatch("app/toggleToken",""),Promise.reject(e.response.data.message)):Promise.reject(e.response.data.message);default:return Promise.reject(e.response.data.message)}})),t["a"]=s},c40e:function(e,t,a){"use strict";var n=a("b775");t["a"]={queryGoods:function(e){return Object(n["a"])({url:"/goods/queryGoods",method:"get",params:e})},search:function(e){return Object(n["a"])({url:"/goods/search",method:"get",params:e})},searchHot:function(){return Object(n["a"])({url:"/goods/searchHot",method:"get"})},searchNew:function(){return Object(n["a"])({url:"/goods/searchNew",method:"get"})},getGoods:function(e){return Object(n["a"])({url:"/goods/"+e,method:"get"})}}},c5a6:function(e,t,a){}}]);