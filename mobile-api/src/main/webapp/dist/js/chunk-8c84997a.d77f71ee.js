(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8c84997a"],{"324c":function(e,t,a){},b30f:function(e,t,a){"use strict";var r=a("b775");t["a"]={save:function(e){return Object(r["a"])({url:"/shop/order/save",method:"post",params:e})},get:function(e){return Object(r["a"])({url:"/shop/order/"+e,method:"get"})},remove:function(e){return Object(r["a"])({url:"/shop/order/cancel/"+e,method:"post"})},getOrders:function(e){return Object(r["a"])({url:"/shop/order/getOrders",method:"get",params:e})},prepareCheckout:function(e){return Object(r["a"])({url:"/shop/order/prepareCheckout",params:e,method:"get"})},confirm:function(e){return Object(r["a"])({url:"/shop/order/confirm/"+e,method:"post"})}}},b775:function(e,t,a){"use strict";var r=a("bc3a"),n=a.n(r),o=(a("41cb"),a("4360")),s=a("5d2d"),c=n.a.create({baseURL:"/mobile",withCredentials:!0,timeout:15e3});c.interceptors.request.use((function(e){return s["a"].getToken()&&(e.headers["Authorization"]=s["a"].getToken()),s["a"].getOpenId()&&(e.headers["openId"]=s["a"].getOpenId()),e}),(function(e){return Promise.reject(e)})),c.interceptors.response.use((function(e){e.headers.token&&o["a"].dispatch("app/toggleToken",e.headers.token);var t=e.data;return t}),(function(e){if(e.response)switch(e.response.status){case 401:return o["a"].dispatch("app/toggleUser",{}),o["a"].dispatch("app/toggleToken",""),Promise.reject(e.response.data.message);case 500:return e.response.data.message&&e.response.data.message.indexOf("relogin")>-1?(console.log("need relogin"),o["a"].dispatch("app/toggleUser",{}),o["a"].dispatch("app/toggleToken",""),Promise.reject(e.response.data.message)):Promise.reject(e.response.data.message);default:return Promise.reject(e.response.data.message)}})),t["a"]=c},f0c8:function(e,t,a){"use strict";var r=a("324c"),n=a.n(r);n.a},f571:function(e,t,a){"use strict";a.r(t);var r,n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("van-cell-group",[a("van-cell",{attrs:{title:e.addrText,"is-link":"",to:"address"}})],1),e._v(" "),e._l(e.cartList,(function(t){return a("div",{key:t.id,staticClass:"card-goods__item"},[a("van-card",{staticStyle:{"margin-left":"15px"},attrs:{title:t.title,desc:t.goods.descript,num:t.amount,price:e.formatPrice(t.price),thumb:t.thumb}})],1)})),e._v(" "),a("van-submit-bar",{attrs:{price:e.totalPrice,disabled:!e.checkedGoods.length,"button-text":e.submitBarText},on:{submit:e.submit},scopedSlots:e._u([{key:"tip",fn:function(){return[e._v("\n    说明：含运费￥9.9\n  ")]},proxy:!0}])}),e._v(" "),a("van-tabbar",{model:{value:e.activeFooter,callback:function(t){e.activeFooter=t},expression:"activeFooter"}},[a("van-tabbar-item",{attrs:{icon:"home-o",replace:"",to:"/index"}},[e._v("首页")]),e._v(" "),a("van-tabbar-item",{attrs:{icon:"cart-o",replace:"",to:"/cart"}},[e._v("购物车")]),e._v(" "),a("van-tabbar-item",{attrs:{icon:"user-o",replace:"",to:"/user"}},[e._v("我的")])],1)],2)},o=[],s=(a("e7e5"),a("d399")),c=a("bd86"),i=(a("0653"),a("34e9")),d=(a("c194"),a("7744")),u=(a("a52c"),a("2ed4")),h=(a("537a"),a("ac28")),p=(a("5246"),a("6b41")),l=(a("a909"),a("3acc")),m=(a("be39"),a("efa0")),f=(a("3c32"),a("417e")),b=(a("9cb7"),a("66fd")),g=a("b30f"),v=a("5d2d"),k="/mobile",O={components:(r={},Object(c["a"])(r,b["a"].name,b["a"]),Object(c["a"])(r,f["a"].name,f["a"]),Object(c["a"])(r,m["a"].name,m["a"]),Object(c["a"])(r,l["a"].name,l["a"]),Object(c["a"])(r,p["a"].name,p["a"]),Object(c["a"])(r,h["a"].name,h["a"]),Object(c["a"])(r,u["a"].name,u["a"]),Object(c["a"])(r,d["a"].name,d["a"]),Object(c["a"])(r,i["a"].name,i["a"]),r),data:function(){return{activeFooter:1,checkedGoods:[],checkeAllCarts:[],cartList:[],checkedAll:!0,addr:void 0,message:""}},mounted:function(){this.init()},computed:{addrText:function(){return this.addr?this.addr.name+"("+this.addr.mobile+")":"请添加收货地址"},submitBarText:function(){var e=this.checkedGoods.length;return"提交订单"+(e?"(".concat(e,")"):"")},totalPrice:function(){var e=this;return this.cartList.reduce((function(t,a){return t+(-1!==e.checkedGoods.indexOf(a.id)?parseFloat(a.goods.price)*a.amount:0)}),990)}},methods:{init:function(){var e=this,t=v["a"].get("chosenAddressId");g["a"].prepareCheckout({chosenAddressId:t}).then((function(t){var a=t.data.list;for(var r in e.addr=t.data.addr,a)a[r].thumb=k+"/rest/file/getImgStream?idFile="+a[r].goods.pic,e.checkedGoods.push(a[r].id);e.cartList=a})).catch((function(e){Object(s["a"])("err".concat(e))}))},submit:function(){var e=this;g["a"].save({idAddress:this.addr.id,message:this.message}).then((function(t){var a=t.data;e.$router.push({path:"/payment",query:{orderSn:a.orderSn,totalPrice:a.totalPrice}})}))},formatPrice:function(e){return(e/100).toFixed(2)},stepperEvent:function(e,t){var a=t[0];cart.update({id:e.id,count:a})},checkAll:function(){this.checkedGoods.length===this.cartList.length?(this.checkeAllCarts=this.checkedGoods,this.checkedGoods=[]):this.checkedGoods=this.checkeAllCarts},chooseAddress:function(){}}},j=O,_=(a("f0c8"),a("2877")),x=Object(_["a"])(j,n,o,!1,null,null,null);t["default"]=x.exports}}]);