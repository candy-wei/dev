(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-24c64be6"],{"092d":function(t,e,n){"use strict";function a(t){var e=t.parentNode;e&&e.removeChild(t)}n.d(e,"a",(function(){return a}))},"0fee":function(t,e,n){},"34e9":function(t,e,n){"use strict";var a=n("2638"),o=n.n(a),i=n("d282"),r=n("ba31"),s=n("b1d2"),c=Object(i["a"])("cell-group"),l=c[0],u=c[1];function d(t,e,n,a){var i,c=t("div",o()([{class:[u(),(i={},i[s["f"]]=e.border,i)]},Object(r["b"])(a,!0)]),[null==n.default?void 0:n.default()]);return e.title||n.title?t("div",[t("div",{class:u("title")},[n.title?n.title():e.title]),c]):c}d.props={title:String,border:{type:Boolean,default:!0}},e["a"]=l(d)},3647:function(t,e,n){"use strict";n("68ef"),n("9d70"),n("3743"),n("1a04"),n("5c56"),n("0fee")},"45e1":function(t,e,n){"use strict";n.r(e);var a,o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("van-tabs",{on:{click:t.clickNav},model:{value:t.activeNav,callback:function(e){t.activeNav=e},expression:"activeNav"}},t._l(t.navList,(function(t){return n("van-tab",{key:t.id,attrs:{title:t.name}})})),1),t._v(" "),n("div",{staticClass:"order_list"},[n("van-list",{attrs:{finished:t.finished,"immediate-check":!1,"finished-text":"没有更多了"},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.orderList,(function(e,a){return n("van-panel",{key:a,attrs:{title:"订单编号: "+e.orderSn,status:e.statusName},nativeOn:{click:function(n){return t.toOrderDetail(e.orderSn)}}},[t._l(e.goods,(function(e,a){return n("van-card",{key:a,attrs:{title:e.title,desc:e.descript,price:t.formatPrice(e.price),num:e.count,thumb:t.imgUrl+e.pic},on:{click:function(n){return n.stopPropagation(),t.toGoods(e.id)}}})})),t._v(" "),n("div",{staticClass:"total"},[t._v("合计: "+t._s(t.formatPrice(e.totalPrice)))]),t._v(" "),n("div",{staticClass:"footer_btn",attrs:{slot:"footer"},slot:"footer"},[n("van-button",{directives:[{name:"show",rawName:"v-show",value:"待付款"===e.statusName,expression:"item.statusName === '待付款'"}],attrs:{size:"small",type:"default"},on:{click:function(n){return n.stopPropagation(),t.cancelOrder(e)}}},[t._v("取消订单")]),t._v(" "),n("van-button",{attrs:{size:"small",type:"danger"},on:{click:function(n){return n.stopPropagation(),t.handleOrder(e)}}},[t._v(t._s(t.getHandlerText(e.statusName)))])],1)],2)})),1)],1),t._v(" "),n("van-tabbar",{model:{value:t.activeFooter,callback:function(e){t.activeFooter=e},expression:"activeFooter"}},[n("van-tabbar-item",{attrs:{icon:"home-o",replace:"",to:"/index"}},[t._v("首页")]),t._v(" "),n("van-tabbar-item",{attrs:{icon:"cart-o",replace:"",to:"/cart"}},[t._v("购物车")]),t._v(" "),n("van-tabbar-item",{attrs:{icon:"user-o",replace:"",to:"/user"}},[t._v("我的")])],1)],1)},i=[],r=(n("e7e5"),n("d399")),s=n("bd86"),c=(n("66b9"),n("b650")),l=(n("2994"),n("2bdd")),u=(n("3647"),n("ea47")),d=(n("a52c"),n("2ed4")),f=(n("bda7"),n("5e46")),h=(n("537a"),n("ac28")),p=(n("da3c"),n("0b33")),v=(n("5246"),n("6b41")),b=(n("a909"),n("3acc")),m=(n("be39"),n("efa0")),g=(n("3c32"),n("417e")),O=(n("9cb7"),n("66fd")),y=(n("81e6"),n("9ffb")),k=(n("4d48"),n("d1e1")),j=n("b30f"),S="/mobile",x={components:(a={},Object(s["a"])(a,k["a"].name,k["a"]),Object(s["a"])(a,y["a"].name,y["a"]),Object(s["a"])(a,O["a"].name,O["a"]),Object(s["a"])(a,g["a"].name,g["a"]),Object(s["a"])(a,m["a"].name,m["a"]),Object(s["a"])(a,b["a"].name,b["a"]),Object(s["a"])(a,v["a"].name,v["a"]),Object(s["a"])(a,p["a"].name,p["a"]),Object(s["a"])(a,h["a"].name,h["a"]),Object(s["a"])(a,f["a"].name,f["a"]),Object(s["a"])(a,d["a"].name,d["a"]),Object(s["a"])(a,u["a"].name,u["a"]),Object(s["a"])(a,l["a"].name,l["a"]),Object(s["a"])(a,c["a"].name,c["a"]),a),data:function(){return{navList:[{name:"全部",id:0},{name:"待付款",id:1},{name:"待发货",id:2},{name:"已发货",id:3},{name:"已完成",id:4}],orderList:[],activeNav:0,activeFooter:3,checkedGoods:["1"],goods:[],imgUrl:S+"/rest/file/getImgStream?idFile=",listQuery:{page:1,pageNum:6,limit:20,status:0},loading:!1,finished:!1}},mounted:function(){if(this.$route.query){var t=this.$route.query.status;this.activeNav=parseInt(t),this.listQuery.status=t}this.init()},computed:{submitBarText:function(){var t=this.checkedGoods.length;return"结算"+(t?"(".concat(t,")"):"")}},methods:{init:function(){this.getData()},getData:function(){var t=this;j["a"].getOrders(this.listQuery).then((function(e){var n=e.data.list;for(var a in n){var o=n[a];o.title=""+o.createTime,o.descript=""+o.orderSn}t.orderList=n,t.loading=!1,t.finished=0===e.data.total||e.data.current===e.data.pages})).catch((function(t){}))},formatPrice:function(t){return(t/100).toFixed(2)},onClickLeft:function(){this.$router.go(-1)},clickNav:function(t,e){this.activeNav=t,this.listQuery.status=this.navList[t].id,this.getData()},toOrderDetail:function(t){this.$router.push("/order/detail/"+t)},toGoods:function(t){this.$router.push({path:"/goods/"+t})},cancelOrder:function(t){var e=this;j["a"].remove(t.orderSn).then((function(t){e.getData()}))},getHandlerText:function(t){return"已发货"===t?"确认收货":"待付款"===t?"立即付款":t},handleOrder:function(t){var e=this;"待付款"===t.statusName&&this.$router.push({path:"payment",query:{orderSn:t.orderSn,totalPrice:t.totalPrice}}),"已发货"===t.statusName&&t.confirm(orderInfo.orderSn).then((function(t){Object(r["a"])("成功收货"),e.getData()}))}}},C=x,$=(n("74c9"),n("2877")),N=Object($["a"])(C,o,i,!1,null,null,null);e["default"]=N.exports},"4d75":function(t,e,n){},"5c56":function(t,e,n){},6605:function(t,e,n){"use strict";n.d(e,"a",(function(){return x}));var a,o={zIndex:2e3,lockCount:0,stack:[],get top(){return this.stack[this.stack.length-1]}},i=n("c31d"),r=n("6e47"),s=n("ba31"),c={className:"",customStyle:{}};function l(){if(o.top){var t=o.top.vm;t.$emit("click-overlay"),t.closeOnClickOverlay&&(t.onClickOverlay?t.onClickOverlay():t.close())}}function u(){a=Object(s["c"])(r["a"],{on:{click:l}})}function d(){if(a||u(),o.top){var t=o.top,e=t.vm,n=t.config,r=e.$el;r&&r.parentNode?r.parentNode.insertBefore(a.$el,r):document.body.appendChild(a.$el),Object(i["a"])(a,c,n,{show:!0})}else a.show=!1}function f(t,e){o.stack.some((function(e){return e.vm===t}))||(o.stack.push({vm:t,config:e}),d())}function h(t){var e=o.stack;e.length&&(o.top.vm===t?(e.pop(),d()):o.stack=e.filter((function(e){return e.vm!==t})))}var p=n("1325"),v=n("092d"),b=n("a8c1"),m=n("3875"),g=n("2b0e");function O(t){return"string"===typeof t?document.querySelector(t):t()}function y(t){var e=t.ref,n=t.afterPortal;return g["a"].extend({props:{getContainer:[String,Function]},watch:{getContainer:"portal"},mounted:function(){this.getContainer&&this.portal()},methods:{portal:function(){var t,a=this.getContainer,o=e?this.$refs[e]:this.$el;a?t=O(a):this.$parent&&(t=this.$parent.$el),t&&t!==o.parentNode&&t.appendChild(o),n&&n.call(this)}}})}var k=n("5fbe"),j={mixins:[Object(k["a"])((function(t,e){this.handlePopstate(e&&this.closeOnPopstate)}))],props:{closeOnPopstate:Boolean},data:function(){return{bindStatus:!1}},watch:{closeOnPopstate:function(t){this.handlePopstate(t)}},methods:{handlePopstate:function(t){var e=this;if(!this.$isServer&&this.bindStatus!==t){this.bindStatus=t;var n=t?p["b"]:p["a"];n(window,"popstate",(function(){e.close(),e.shouldReopen=!1}))}}}},S={value:Boolean,overlay:Boolean,overlayStyle:Object,overlayClass:String,closeOnClickOverlay:Boolean,zIndex:[Number,String],lockScroll:{type:Boolean,default:!0},lazyRender:{type:Boolean,default:!0}};function x(t){return void 0===t&&(t={}),{mixins:[m["a"],j,y({afterPortal:function(){this.overlay&&d()}})],props:S,data:function(){return{inited:this.value}},computed:{shouldRender:function(){return this.inited||!this.lazyRender}},watch:{value:function(e){var n=e?"open":"close";this.inited=this.inited||this.value,this[n](),t.skipToggleEvent||this.$emit(n)},overlay:"renderOverlay"},mounted:function(){this.value&&this.open()},activated:function(){this.shouldReopen&&(this.$emit("input",!0),this.shouldReopen=!1)},beforeDestroy:function(){this.close(),this.getContainer&&Object(v["a"])(this.$el)},deactivated:function(){this.value&&(this.close(),this.shouldReopen=!0)},methods:{open:function(){this.$isServer||this.opened||(void 0!==this.zIndex&&(o.zIndex=this.zIndex),this.opened=!0,this.renderOverlay(),this.lockScroll&&(Object(p["b"])(document,"touchstart",this.touchStart),Object(p["b"])(document,"touchmove",this.onTouchMove),o.lockCount||document.body.classList.add("van-overflow-hidden"),o.lockCount++))},close:function(){this.opened&&(this.lockScroll&&(o.lockCount--,Object(p["a"])(document,"touchstart",this.touchStart),Object(p["a"])(document,"touchmove",this.onTouchMove),o.lockCount||document.body.classList.remove("van-overflow-hidden")),this.opened=!1,h(this),this.$emit("input",!1))},onTouchMove:function(t){this.touchMove(t);var e=this.deltaY>0?"10":"01",n=Object(b["d"])(t.target,this.$el),a=n.scrollHeight,o=n.offsetHeight,i=n.scrollTop,r="11";0===i?r=o>=a?"00":"01":i+o>=a&&(r="10"),"11"===r||"vertical"!==this.direction||parseInt(r,2)&parseInt(e,2)||Object(p["c"])(t,!0)},renderOverlay:function(){var t=this;!this.$isServer&&this.value&&this.$nextTick((function(){t.updateZIndex(t.overlay?1:0),t.overlay?f(t,{zIndex:o.zIndex++,duration:t.duration,className:t.overlayClass,customStyle:t.overlayStyle}):h(t)}))},updateZIndex:function(t){void 0===t&&(t=0),this.$el.style.zIndex=++o.zIndex+t}}}}},"66b9":function(t,e,n){"use strict";n("68ef"),n("9d70"),n("3743"),n("e3b3"),n("bc1b")},"6e47":function(t,e,n){"use strict";var a=n("2638"),o=n.n(a),i=n("c31d"),r=n("d282"),s=n("a142"),c=n("ba31"),l=n("1325"),u=Object(r["a"])("overlay"),d=u[0],f=u[1];function h(t){Object(l["c"])(t,!0)}function p(t,e,n,a){var r=Object(i["a"])({zIndex:e.zIndex},e.customStyle);return Object(s["b"])(e.duration)&&(r.animationDuration=e.duration+"s"),t("transition",{attrs:{name:"van-fade"}},[t("div",o()([{directives:[{name:"show",value:e.show}],style:r,class:[f(),e.className],on:{touchmove:e.lockScroll?h:s["g"]}},Object(c["b"])(a,!0)]),[null==n.default?void 0:n.default()])])}p.props={show:Boolean,zIndex:[Number,String],duration:[Number,String],className:null,customStyle:Object,lockScroll:{type:Boolean,default:!0}},e["a"]=d(p)},"74c9":function(t,e,n){"use strict";var a=n("d236"),o=n.n(a);o.a},a71a:function(t,e,n){},b258:function(t,e,n){},b30f:function(t,e,n){"use strict";var a=n("b775");e["a"]={save:function(t){return Object(a["a"])({url:"/shop/order/save",method:"post",params:t})},get:function(t){return Object(a["a"])({url:"/shop/order/"+t,method:"get"})},remove:function(t){return Object(a["a"])({url:"/shop/order/cancel/"+t,method:"post"})},getOrders:function(t){return Object(a["a"])({url:"/shop/order/getOrders",method:"get",params:t})},prepareCheckout:function(t){return Object(a["a"])({url:"/shop/order/prepareCheckout",params:t,method:"get"})},confirm:function(t){return Object(a["a"])({url:"/shop/order/confirm/"+t,method:"post"})}}},b650:function(t,e,n){"use strict";var a=n("c31d"),o=n("2638"),i=n.n(o),r=n("d282"),s=n("ba31"),c=n("b1d2"),l=n("48f4"),u=n("ad06"),d=n("543e"),f=Object(r["a"])("button"),h=f[0],p=f[1];function v(t,e,n,a){var o,r=e.tag,f=e.icon,h=e.type,v=e.color,b=e.plain,m=e.disabled,g=e.loading,O=e.hairline,y=e.loadingText,k={};function j(t){g||m||(Object(s["a"])(a,"click",t),Object(l["a"])(a))}function S(t){Object(s["a"])(a,"touchstart",t)}v&&(k.color=b?v:c["h"],b||(k.background=v),-1!==v.indexOf("gradient")?k.border=0:k.borderColor=v);var x=[p([h,e.size,{plain:b,loading:g,disabled:m,hairline:O,block:e.block,round:e.round,square:e.square}]),(o={},o[c["d"]]=O,o)];function C(){var a,o=[];return g?o.push(t(d["a"],{class:p("loading"),attrs:{size:e.loadingSize,type:e.loadingType,color:"currentColor"}})):f&&o.push(t(u["a"],{attrs:{name:f,classPrefix:e.iconPrefix},class:p("icon")})),a=g?y:n.default?n.default():e.text,a&&o.push(t("span",{class:p("text")},[a])),o}return t(r,i()([{style:k,class:x,attrs:{type:e.nativeType,disabled:m},on:{click:j,touchstart:S}},Object(s["b"])(a)]),[C()])}v.props=Object(a["a"])({},l["c"],{text:String,icon:String,color:String,block:Boolean,plain:Boolean,round:Boolean,square:Boolean,loading:Boolean,hairline:Boolean,disabled:Boolean,iconPrefix:String,nativeType:String,loadingText:String,loadingType:String,tag:{type:String,default:"button"},type:{type:String,default:"default"},size:{type:String,default:"normal"},loadingSize:{type:String,default:"20px"}}),e["a"]=h(v)},b775:function(t,e,n){"use strict";var a=n("bc3a"),o=n.n(a),i=(n("41cb"),n("4360")),r=n("5d2d"),s=o.a.create({baseURL:"/mobile",withCredentials:!0,timeout:15e3});s.interceptors.request.use((function(t){return r["a"].getToken()&&(t.headers["Authorization"]=r["a"].getToken()),r["a"].getOpenId()&&(t.headers["openId"]=r["a"].getOpenId()),t}),(function(t){return Promise.reject(t)})),s.interceptors.response.use((function(t){t.headers.token&&i["a"].dispatch("app/toggleToken",t.headers.token);var e=t.data;return e}),(function(t){if(t.response)switch(t.response.status){case 401:return i["a"].dispatch("app/toggleUser",{}),i["a"].dispatch("app/toggleToken",""),Promise.reject(t.response.data.message);case 500:return t.response.data.message&&t.response.data.message.indexOf("relogin")>-1?(console.log("need relogin"),i["a"].dispatch("app/toggleUser",{}),i["a"].dispatch("app/toggleToken",""),Promise.reject(t.response.data.message)):Promise.reject(t.response.data.message);default:return Promise.reject(t.response.data.message)}})),e["a"]=s},bc1b:function(t,e,n){},d236:function(t,e,n){},d399:function(t,e,n){"use strict";var a=n("c31d"),o=n("2b0e"),i=n("d282"),r=n("a142"),s=0;function c(t){t?(s||document.body.classList.add("van-toast--unclickable"),s++):(s--,s||document.body.classList.remove("van-toast--unclickable"))}var l=n("6605"),u=n("ad06"),d=n("543e"),f=Object(i["a"])("toast"),h=f[0],p=f[1],v=h({mixins:[Object(l["a"])()],props:{icon:String,className:null,iconPrefix:String,loadingType:String,forbidClick:Boolean,closeOnClick:Boolean,message:[Number,String],type:{type:String,default:"text"},position:{type:String,default:"middle"},transition:{type:String,default:"van-fade"},lockScroll:{type:Boolean,default:!1}},data:function(){return{clickable:!1}},mounted:function(){this.toggleClickable()},destroyed:function(){this.toggleClickable()},watch:{value:"toggleClickable",forbidClick:"toggleClickable"},methods:{onClick:function(){this.closeOnClick&&this.close()},toggleClickable:function(){var t=this.value&&this.forbidClick;this.clickable!==t&&(this.clickable=t,c(t))},onAfterEnter:function(){this.$emit("opened"),this.onOpened&&this.onOpened()},onAfterLeave:function(){this.$emit("closed")},genIcon:function(){var t=this.$createElement,e=this.icon,n=this.type,a=this.iconPrefix,o=this.loadingType,i=e||"success"===n||"fail"===n;return i?t(u["a"],{class:p("icon"),attrs:{classPrefix:a,name:e||n}}):"loading"===n?t(d["a"],{class:p("loading"),attrs:{type:o}}):void 0},genMessage:function(){var t=this.$createElement,e=this.type,n=this.message;if(Object(r["b"])(n)&&""!==n)return"html"===e?t("div",{class:p("text"),domProps:{innerHTML:n}}):t("div",{class:p("text")},[n])}},render:function(){var t,e=arguments[0];return e("transition",{attrs:{name:this.transition},on:{afterEnter:this.onAfterEnter,afterLeave:this.onAfterLeave}},[e("div",{directives:[{name:"show",value:this.value}],class:[p([this.position,(t={},t[this.type]=!this.icon,t)]),this.className],on:{click:this.onClick}},[this.genIcon(),this.genMessage()])])}}),b=n("092d"),m={icon:"",type:"text",mask:!1,value:!0,message:"",className:"",overlay:!1,onClose:null,onOpened:null,duration:2e3,iconPrefix:void 0,position:"middle",transition:"van-fade",forbidClick:!1,loadingType:void 0,getContainer:"body",overlayStyle:null,closeOnClick:!1,closeOnClickOverlay:!1},g={},O=[],y=!1,k=Object(a["a"])({},m);function j(t){return Object(r["d"])(t)?t:{message:t}}function S(){if(r["f"])return{};if(!O.length||y){var t=new(o["a"].extend(v))({el:document.createElement("div")});t.$on("input",(function(e){t.value=e})),O.push(t)}return O[O.length-1]}function x(t){return Object(a["a"])({},t,{overlay:t.mask||t.overlay,mask:void 0,duration:void 0})}function C(t){void 0===t&&(t={});var e=S();return e.value&&e.updateZIndex(),t=j(t),t=Object(a["a"])({},k,{},g[t.type||k.type],{},t),t.clear=function(){e.value=!1,t.onClose&&t.onClose(),y&&!r["f"]&&e.$on("closed",(function(){clearTimeout(e.timer),O=O.filter((function(t){return t!==e})),Object(b["a"])(e.$el),e.$destroy()}))},Object(a["a"])(e,x(t)),clearTimeout(e.timer),t.duration>0&&(e.timer=setTimeout((function(){e.clear()}),t.duration)),e}var $=function(t){return function(e){return C(Object(a["a"])({type:t},j(e)))}};["loading","success","fail"].forEach((function(t){C[t]=$(t)})),C.clear=function(t){O.length&&(t?(O.forEach((function(t){t.clear()})),O=[]):y?O.shift().clear():O[0].clear())},C.setDefaultOptions=function(t,e){"string"===typeof t?g[t]=e:Object(a["a"])(k,t)},C.resetDefaultOptions=function(t){"string"===typeof t?g[t]=null:(k=Object(a["a"])({},m),g={})},C.allowMultiple=function(t){void 0===t&&(t=!0),y=t},C.install=function(){o["a"].use(v)},o["a"].prototype.$toast=C;e["a"]=C},e7e5:function(t,e,n){"use strict";n("68ef"),n("a71a"),n("9d70"),n("3743"),n("4d75"),n("e3b3"),n("b258")},ea47:function(t,e,n){"use strict";var a=n("2638"),o=n.n(a),i=n("d282"),r=n("ba31"),s=n("b1d2"),c=n("7744"),l=n("34e9"),u=Object(i["a"])("panel"),d=u[0],f=u[1];function h(t,e,n,a){var i=function(){return[n.header?n.header():t(c["a"],{attrs:{icon:e.icon,label:e.desc,title:e.title,value:e.status,valueClass:f("header-value")},class:f("header")}),t("div",{class:f("content")},[n.default&&n.default()]),n.footer&&t("div",{class:[f("footer"),s["e"]]},[n.footer()])]};return t(l["a"],o()([{class:f(),scopedSlots:{default:i}},Object(r["b"])(a,!0)]))}h.props={icon:String,desc:String,title:String,status:String},e["a"]=d(h)}}]);