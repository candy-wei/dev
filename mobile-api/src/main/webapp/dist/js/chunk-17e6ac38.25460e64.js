(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-17e6ac38"],{"14f3":function(e,t,a){"use strict";a.r(t);var s,n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"avatar"},[a("div",{staticClass:"preview"},[a("van-image",{attrs:{round:"",width:"100",height:"100",src:e.avatarUrl}})],1),e._v(" "),a("div",{staticClass:"upload"},[a("van-uploader",{attrs:{"after-read":e.afterRead}})],1)])},r=[],i=a("bd86"),o=(a("68ef"),a("a71a"),a("9d70"),a("3743"),a("09fe"),a("4d75"),a("e3b3"),a("8270"),a("786d"),a("504b"),a("bcd3"),a("8f80")),c=(a("4056"),a("44bf")),u=(a("e7e5"),a("d399")),d=(a("be7f"),a("565f")),l=(a("5246"),a("6b41")),h=(a("0653"),a("34e9")),f=(a("c194"),a("7744")),p=(a("66b9"),a("b650")),g=a("c24f"),m=a("4360"),b="/mobile",v={components:(s={},Object(i["a"])(s,p["a"].name,p["a"]),Object(i["a"])(s,f["a"].name,f["a"]),Object(i["a"])(s,h["a"].name,h["a"]),Object(i["a"])(s,l["a"].name,l["a"]),Object(i["a"])(s,d["a"].name,d["a"]),Object(i["a"])(s,u["a"].name,u["a"]),Object(i["a"])(s,c["a"].name,c["a"]),Object(i["a"])(s,o["a"].name,o["a"]),s),data:function(){return{avatarUrl:"http://microapp.gitee.io/linjiashop/logo.jpg"}},mounted:function(){this.init()},methods:{init:function(){this.user=m["a"].state.app.user,this.user.avatar&&(this.avatarUrl=b+"/rest/file/getImgStream?idFile="+this.user.avatar)},onClickLeft:function(){this.$router.go(-1)},afterRead:function(e){var t=this;console.log("上传成功",e),g["a"].upload({name:e.file.name,type:e.file.type,base64:e.content}).then((function(e){m["a"].dispatch("app/toggleUser",e.data),t.avatarUrl=b+"/rest/file/getImgStream?idFile="+e.data.avatar}))}}},j=v,O=(a("f0d8"),a("2877")),k=Object(O["a"])(j,n,r,!1,null,null,null);t["default"]=k.exports},4056:function(e,t,a){"use strict";a("68ef"),a("9d70"),a("3743"),a("09fe")},5246:function(e,t,a){"use strict";a("68ef"),a("9d70"),a("3743"),a("8a0b")},"6b41":function(e,t,a){"use strict";var s=a("d282"),n=a("b1d2"),r=a("ad06"),i=Object(s["a"])("nav-bar"),o=i[0],c=i[1];t["a"]=o({props:{title:String,fixed:Boolean,zIndex:[Number,String],leftText:String,rightText:String,leftArrow:Boolean,placeholder:Boolean,border:{type:Boolean,default:!0}},data:function(){return{height:null}},mounted:function(){this.placeholder&&this.fixed&&(this.height=this.$refs.navBar.getBoundingClientRect().height)},methods:{genLeft:function(){var e=this.$createElement,t=this.slots("left");return t||[this.leftArrow&&e(r["a"],{class:c("arrow"),attrs:{name:"arrow-left"}}),this.leftText&&e("span",{class:c("text")},[this.leftText])]},genRight:function(){var e=this.$createElement,t=this.slots("right");return t||(this.rightText?e("span",{class:c("text")},[this.rightText]):void 0)},genNavBar:function(){var e,t=this.$createElement;return t("div",{ref:"navBar",style:{zIndex:this.zIndex},class:[c({fixed:this.fixed}),(e={},e[n["b"]]=this.border,e)]},[t("div",{class:c("left"),on:{click:this.onClickLeft}},[this.genLeft()]),t("div",{class:[c("title"),"van-ellipsis"]},[this.slots("title")||this.title]),t("div",{class:c("right"),on:{click:this.onClickRight}},[this.genRight()])])},onClickLeft:function(e){this.$emit("click-left",e)},onClickRight:function(e){this.$emit("click-right",e)}},render:function(){var e=arguments[0];return this.placeholder&&this.fixed?e("div",{class:c("placeholder"),style:{height:this.height+"px"}},[this.genNavBar()]):this.genNavBar()}})},"8a0b":function(e,t,a){},b775:function(e,t,a){"use strict";var s=a("bc3a"),n=a.n(s),r=(a("41cb"),a("4360")),i=a("5d2d"),o=n.a.create({baseURL:"/mobile",withCredentials:!0,timeout:15e3});o.interceptors.request.use((function(e){return i["a"].getToken()&&(e.headers["Authorization"]=i["a"].getToken()),i["a"].getOpenId()&&(e.headers["openId"]=i["a"].getOpenId()),e}),(function(e){return Promise.reject(e)})),o.interceptors.response.use((function(e){e.headers.token&&r["a"].dispatch("app/toggleToken",e.headers.token);var t=e.data;return t}),(function(e){if(e.response)switch(e.response.status){case 401:return r["a"].dispatch("app/toggleUser",{}),r["a"].dispatch("app/toggleToken",""),Promise.reject(e.response.data.message);case 500:return e.response.data.message&&e.response.data.message.indexOf("relogin")>-1?(console.log("need relogin"),r["a"].dispatch("app/toggleUser",{}),r["a"].dispatch("app/toggleToken",""),Promise.reject(e.response.data.message)):Promise.reject(e.response.data.message);default:return Promise.reject(e.response.data.message)}})),t["a"]=o},be7f:function(e,t,a){"use strict";a("68ef"),a("9d70"),a("3743"),a("1a04"),a("1146")},c0d8:function(e,t,a){},c24f:function(e,t,a){"use strict";var s=a("b775");t["a"]={getUserInfo:function(){return Object(s["a"])({url:"/shop/user/getInfo",method:"post"})},updateUserName:function(e){return Object(s["a"])({url:"/user/updateUserName/"+e,method:"post"})},updatePwd:function(e){return Object(s["a"])({url:"/account/updatePwd",method:"post",params:e})},updateGender:function(e){return Object(s["a"])({url:"/user/updateGender/"+e,method:"post"})},updatePassword:function(e,t,a){return Object(s["a"])({url:"/user/updatePassword/"+e+"/"+t+"/"+a,method:"post"})},upload:function(e){return console.log("file",e),Object(s["a"])({url:"/file/upload/base64",method:"post",data:e})},sendSmsCode:function(e){return Object(s["a"])({url:"/user/sendSmsCode",method:"post",params:{mobile:e}})},getTask:function(){return Object(s["a"])({url:"/shop/user/tasks",method:"post"})},getMyTeam:function(){return Object(s["a"])({url:"/shop/user/team",method:"post"})},getMyRecommend:function(){return Object(s["a"])({url:"/shop/user/recommend",method:"post"})}}},f0d8:function(e,t,a){"use strict";var s=a("c0d8"),n=a.n(s);n.a}}]);