<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ningyuan.mobile.daomapper.mapper.ShopWalletMapper">

    <select id="getCashList" resultType="com.ningyuan.mobile.dto.RedPacketDto">
        select
            src.open_id,
            (select base_value from basedata where base_type = 'receive_record' and base_key = src.type) optionType,
            src.amount finance,
            src.create_time
        from shop_receive_record as src
        left join wx_user as wu on src.open_id=wu.open_id
        where src.open_id = #{openId}
        order by src.create_time desc
    </select>

    <select id="getCashSum" parameterType="string">
        select sum(if(opt_type =2 , amount, 0)) from shop_receive_record where open_id = #{openId}
    </select>
</mapper>